<html>  
    <head>
        <meta charset="utf-8"/>
        <script src="wasm_exec.js"></script>
        <script>
            const go = new Go();
            WebAssembly.instantiateStreaming(fetch("golang.wasm"), go.importObject).then((result) => {
                go.run(result.instance);
            });
        </script>
    </head>
    
    <body>
         <textarea id="jsoninput" placeholder="输入json数据..." name="jsoninput" cols="80" rows="20" onchange="json(jsoninput.value)"></textarea>
         <textarea id="jsonoutput" name="jsonoutput" cols="80" rows="20"></textarea>
         <!-- <input id="button" type="submit" name="button" value="copy result" onclick="copy()"/> -->
    </body>
    <script>
        function json(input) {
            jsonoutput.value = formatJSON(input)
        }

        // function copy() {
        //     let tx = document.getElementById('jsonoutput') 
        //     // 创建select对象与range对象
        //     const selection = window.getSelection()
        //     const range = selection.getRangeAt(0);
        //     range.selectNode(tx)
        //     // // 向选区（Selection）中添加一个区域（Range）
        //     // selection.addRange(range)
        //     console.log(selection)
        //     // 已复制文字
        //     console.log('selectedText', selection.toString())
        //     // 执行浏览器复制命令
        //     document.execCommand('copy')
        // }
     </script>
</html>  